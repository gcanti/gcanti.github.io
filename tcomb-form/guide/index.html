<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>tcomb-form.js v0.4 Guide</title>
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-sham.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="../css/bootstrap.css" id="theme"/>
    <link type="text/css" rel="stylesheet" href="../css/highlight.github.css"/>
    <link type="text/css" rel="stylesheet" href="../css/style.css"/>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="row">
          <div class="col-xs-6">
            <a href="../index.html">tcomb-form.js v0.4</a>
          </div>
          <div class="col-xs-6 text-right">
            Open source (MIT). Made by Giulio Canti
          </div>
        </div>
      </header>
      <div class="row">
        <div class="col-sm-4">
          <h1>Index</h1>
          <ul class="list-unstyled">
            <li><b>Get started</b></li>
              <ul>
                <li><a href="#setup">Setup</a></li>
                <li><a href="#hello-form">Hello form</a></li>
                <li><a href="#look-and-feel">Pluggable look and feel</a></li>
              </ul>
            <li><b>Types</b>
              <ul>
                <li><a href="#optional-field">Optional field</a></li>
                <li><a href="#numeric-field">Numeric field</a></li>
                <li><a href="#boolean-field">Boolean field</a></li>
                <li><a href="#enum-field">Enum field</a></li>
                <li><a href="#subtypes">Subtypes</a></li>
                <li><a href="#lists">Lists</a></li>
                <li><a href="#nested-structures">Nested structures</a></li>
              </ul>
            </li>
            <li><b>Options</b>
              <ul>
                <li>Fieldsets
                  <ul>
                    <li><a href="#fieldset-auto">Generated labels</a></li>
                    <li><a href="#fieldset-order">Fields order</a></li>
                    <li><a href="#fieldset-value">Default values</a></li>
                    <li><a href="#fieldset-legend">Legend</a></li>
                    <li><a href="#fieldset-help">Help</a></li>
                    <li><a href="#fieldset-error">Error message</a></li>
                    <li><a href="#fieldset-disabled">Disabled fieldset</a></li>
                    <li><a href="#fieldset-fields">Fields configuration</a></li>
                  </ul>
                </li>
                <li>Lists
                  <ul>
                    <li><a href="#list-item">Items</a></li>
                    <li><a href="#list-i18n">I18n</a></li>
                    <li><a href="#list-buttons">Buttons configuration</a></li>
                  </ul>
                </li>
                <li>Textbox
                  <ul>
                    <li><a href="#textbox-type">Type attribute</a></li>
                    <li><a href="#textbox-placeholder">Placeholder</a></li>
                    <li><a href="#textbox-label">Label</a></li>
                    <li><a href="#textbox-help">Help</a></li>
                    <li><a href="#textbox-disabled">Disabled</a></li>
                    <li><a href="#textbox-error">Error message</a></li>
                    <li><a href="#textbox-autoFocus">Auto focus</a></li>
                  </ul>
                </li>
                <li>Checkbox
                  <ul>
                    <li><a href="#checkbox-common">Common options</a></li>
                  </ul>
                </li>
                <li>Select
                  <ul>
                    <li><a href="#select-common">Common options</a></li>
                    <li><a href="#select-null-option">Null option</a></li>
                    <li><a href="#select-order">Options order</a></li>
                    <li><a href="#select-options">Custom options</a></li>
                    <li><a href="#select-as-radio">Render as radio</a></li>
                    <li><a href="#select-multiple">Multiple</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><b>Customizations</b>
              <ul>
                <li><a href="#templates">Templates</a></li>
                <li><a href="#templates-extra-options">Templates extra options</a></li>
                <li><a href="#transformers">Transformers</a></li>
                <li><a href="#custom-components">Custom components</a></li>
                <li><a href="#config">General configuration</a></li>
              </ul>
            </li>
            <li><b>Advanced form validation</b>
              <ul>
                <li><a href="#struct-subtypes">Struct subtypes</a></li>
                <li><a href="#list-subtypes">List subtypes</a></li>
              </ul>
            </li>
            <li><b>Bootstrap extras</b>
              <ul>
                <li><a href="#bootstrap-textbox">Textbox</a></li>
                <li><a href="#bootstrap-select">Select</a></li>
                <li><a href="#bootstrap-fieldset">Fieldset</a></li>
              </ul>
            </li>
            <li><b>Isomorphic forms</b>
              <ul>
                <li><a href="#isomorphic-name">name attributes</a></li>
              </ul>
            </li>
            <li><b>Controlled forms</b>
              <ul>
                <li><a href="#controlled-forms">Changing the form configuration on the fly</a></li>
              </ul>
            </li>
            <li><b>API</b>
              <ul>
                <li><a href="#api-Form">t.form.Form</a></li>
              </ul>
            </li>
          <ul>
        </div>
        <div class="col-sm-8">

          <h1>Get started</h1>

          <a name="hello-form"><h2>Setup</h2></a>
          <pre><code>
npm install tcomb-form
          </code></pre>

          <a name="hello-form"><h2>Hello form</h2></a>
          <p>Writing a basic form is easy:</p>
          <ol>
            <li>define a model with <a href="https://github.com/gcanti/tcomb">tcomb</a> (*)</li>
            <li>call <code>&lt;Form type={Model} /&gt;</code></li>
          </ol>
          <p>(*) tcomb <em>is a library for Node.js and the browser which allows you to check the types of JavaScript values at runtime with a simple syntax. It's great for Domain Driven Design, for testing and for adding safety to your internal code.</em></p>
          <p><b>Note</b>. All the examples are live, you can find the source here: <a href="src.js">src.js</a></p>
          <pre><code>
var t = require('tcomb-form');
var Form = t.form.Form;

// define a model
var Person = t.struct({
  name: t.Str, // two string properties
  surname: t.Str
});

// get the form
&lt;Form type={Person} /&gt;
          </code></pre>
          <p>Done. Now you can embed the form in your app and retrieve the value with the <code>getValue()</code> function:</p>
          <pre><code>
var App = React.createClass({

  onClick: function () {
    var value = this.refs.form.<b>getValue()</b>;
    // getValue returns null if validation failed
    if (value) {
      console.log(value);
    }
  },

  render: function () {
    return (
      &lt;div&gt;
        <b>&lt;Form ref="form" type={Person} /&gt;</b>
        &lt;button onClick={this.onClick}&gt;Click me&lt;/button&gt;
      &lt;/div&gt;
    );
  }

});
          </code></pre>
          <p><b>Output</b> (labels are automatically generated):</p>
          <div class="preview">
            <div id="p1" class="form"></div>
            <pre id="v1" class="value"></pre>
          </div>

          <a name="look-and-feel"><h2>Pluggable look and feel</h2></a>

          <p>These examples are styled with Bootstrap 3, you can customize the look and feel changing the Bootstrap flavour:</p>
          <select class="form-control" id="themeSelector">
            <option value="../css/bootstrap.css">Default</option>
            <option value="../css/flatly.css">Flatly</option>
            <option value="../css/paper.css">Paper</option>
          </select>
          <p>or switching to your preferred css framework like Bootstrap, Foundation, Ionic, Pure.
          Bootstrap 3.3 is fully supported. <b>Contributions and PR for other css frameworks are welcomed</b>.</p>

          <h1>Types</h1>
          <a name="optional-field"><h2>Optional field</h2></a>
          <p>To create an optional field wrap the field type with <code>t.maybe</code>:</p>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  surname: t.Str,
  email: t.maybe(t.Str) // an optional string
});
          </code></pre>
          <p><b>Output</b> (the postfix `optional` is automatically generated):</p>
          <div class="preview">
            <div id="p2" class="form"></div>
            <pre id="v2" class="value"></pre>
          </div>

          <a name="numeric-field"><h2>Numeric field</h2></a>
          <p>To create a numeric field use <code>t.Num</code>:</p>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  surname: t.Str,
  email: t.maybe(t.Str),
  age: t.Num // a numeric field
});
          </code></pre>
          <p><b>Output</b> (tcomb-form converts numbers to / from strings):</p>
          <div class="preview">
            <div id="p3" class="form"></div>
            <pre id="v3" class="value"></pre>
          </div>

          <a name="boolean-field"><h2>Boolean field</h2></a>
          <p>To create a boolean field use <code>t.Bool</code>:</p>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  surname: t.Str,
  email: t.maybe(t.Str),
  age: t.Num,
  rememberMe: t.Bool // a boolean field
});
          </code></pre>
          <p><b>Output</b> (booleans are displayed as checkboxes):</p>
          <div class="preview">
            <div id="p4" class="form"></div>
            <pre id="v4" class="value"></pre>
          </div>

          <a name="enum-field"><h2>Enum field</h2></a>
          <p>To create an enum field use <code>t.enums</code>:</p>
          <pre><code>
var Gender = t.enums({
  M: 'Male',
  F: 'Female'
});

var Person = t.struct({
  name: t.Str,
  surname: t.Str,
  email: t.maybe(t.Str),
  age: t.Num,
  rememberMe: t.Bool,
  gender: Gender
});
          </code></pre>
          <p><b>Output</b> (enums are displayed as selects):</p>
          <div class="preview">
            <div id="p5" class="form"></div>
            <pre id="v5" class="value"></pre>
          </div>

          <a name="subtypes"><h2>Subtypes</h2></a>
          <p>A <em>predicate</em> is a function with the following signature:</p>
          <pre><code>function(x) -> Bool</code></pre>
          <p>You can refine a type with <code>t.subtype(type, predicate)</code>:</p>
          <pre><code>
// a type representing positive numbers
var Positive = t.subtype(t.Num, function (n) {
  return n >= 0;
});

var Person = t.struct({
  name: t.Str,
  surname: t.Str,
  email: t.maybe(t.Str),
  age: Positive, // refinement
  rememberMe: t.Bool,
  gender: Gender
});
          </code></pre>
          <p>Subtypes allow you to express any custom validation with a simple predicate.</p>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p6" class="form"></div>
            <pre id="v6" class="value"></pre>
          </div>

          <a name="lists"><h2>Lists</h2></a>
          <p>You can handle a list with <code>t.list</code>:</p>
          <pre><code>
var Tags = t.list(t.Str);
          </code></pre>
          <p>Click <code>Add</code> to add an item. Once created, items can be re-arranged with the buttons to the right.</p>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p7" class="form"></div>
            <pre id="v7" class="value"></pre>
          </div>

          <a name="nested-structures"><h2>Nested structures</h2></a>
          <p>You can nest lists and structs at an arbitrary level:</p>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  surname: t.Str
});

var Persons = t.list(Person);
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p8" class="form"></div>
            <pre id="v8" class="value"></pre>
          </div>

          <h1>Options</h1>
          <p>To customize the form look and feel passing a <code>options</code> prop to the form component:</p>
          <pre><code>
&lt;Form type={Model} options={options} /&gt;
          </code></pre>

          <h2>Fieldset options</h2>

          <a name="fieldset-auto"><h3>Automatically generated placeholders</h3></a>
          <p>Pass the option <code>auto: 'placeholders'</code> to generate default placeholders:</p>
          <pre><code>
var options = {
  auto: 'placeholders'
};

&lt;Form type={Person} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p9" class="form"></div>
            <pre id="v9" class="value"></pre>
          </div>

          <p>Or <code>auto: 'none'</code> if you don't want neither labels nor placeholders:</p>
          <pre><code>
var options = {
  auto: 'none'
};
          </code></pre>

          <a name="fieldset-order"><h3>Fields order</h3></a>
          <p>You can order the fields with the <code>order</code> option:</p>
          <pre><code>
var options = {
  order: ['name', 'surname', 'rememberMe', 'gender', 'age', 'email']
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p10" class="form"></div>
            <pre id="v10" class="value"></pre>
          </div>

          <a name="fieldset-value"><h3>Default values</h3></a>
          <p>You can set the default values passing a <code>value</code> prop to the form component:</p>
          <pre><code>
var value = {
  name: 'Giulio',
  surname: 'Canti',
  age: 41,
  gender: 'M'
};

&lt;Form type={Model} value={value} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p11" class="form"></div>
            <pre id="v11" class="value"></pre>
          </div>

          <a name="fieldset-legend"><h3>Legend</h3></a>
          <p>You can set the fieldset legend with the <code>legend</code> option:</p>
          <pre><code>
var options = {
  // you can use strings or JSX
  legend: &lt;i&gt;My form legend&lt;/i&gt;
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p12" class="form"></div>
            <pre id="v12" class="value"></pre>
          </div>

          <a name="fieldset-help"><h3>Help</h3></a>
          <p>You can set the fieldset help with the <code>help</code> option:</p>
          <pre><code>
var options = {
  // you can use strings or JSX
  help: &lt;i&gt;My form help&lt;/i&gt;
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p13" class="form"></div>
            <pre id="v13" class="value"></pre>
          </div>

          <a name="fieldset-error"><h3>Error message</h3></a>
          <p>You can set a custom error message with the <code>hasError</code> and <code>error</code> options:</p>
          <pre><code>
var options = {
  hasError: true,
  // you can use strings or JSX
  error: &lt;i&gt;A custom error message&lt;/i&gt;
};
          </code></pre>

          <p><code>error</code> can also be a function with the following signature:</p>
          <pre><code>
function (value) -> error
          </code></pre>
          <p>where <code>value</code> is an object containing the current form value.</p>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p14" class="form"></div>
            <pre id="v14" class="value"></pre>
          </div>

          <a name="fieldset-disabled"><h3>Disabled fieldset</h3></a>
          <p>You can disable the whole fieldset with the <code>disabled</code> option:</p>
          <pre><code>
var options = {
  disabled: true
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p15" class="form"></div>
            <pre id="v15" class="value"></pre>
          </div>

          <a name="fieldset-fields"><h3>Fields configuration</h3></a>
          <p>You can configure each field with the <code>fields</code> option:</p>
          <pre><code>
var options = {
  fields: {
    name: {
      // name field configuration here..
    },
    surname: {
      // surname field configuration here..
    }
  }
});
          </code></pre>

          <h2>List options</h2>

          <p>The following list options are similar to the fieldset ones:</p>
          <ul>
            <li><code>auto</code></li>
            <li><code>disabled</code></li>
            <li><code>help</code></li>
            <li><code>hasError</code></li>
            <li><code>error</code></li>
            <li><code>legend</code></li>
            <li><code>value</code></li>
          </ul>

          <a name="list-item"><h3>Items</h3></a>
          <p>To configure all the items in a list set the <code>item</code> option:</p>
          <pre><code>
var Colors = t.list(t.Str);

var options = {
  item: {
    type: 'color'
  }
});

&lt;Form type={Colors} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p16" class="form"></div>
            <pre id="v16" class="value"></pre>
          </div>

          <a name="list-i18n"><h3>I18n</h3></a>
          <p>You can override the default language (english) with the <code>i18n</code> option:</p>
          <pre><code>
var options = {
  i18n: {
    add: 'Nuovo',               // add button
    down: 'Giù',                // move down button
    optional: ' (opzionale)',   // suffix added to optional fields
    remove: 'Elimina',          // remove button
    up: 'Su'                    // move up button
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p17" class="form"></div>
            <pre id="v17" class="value"></pre>
          </div>

          <a name="list-buttons"><h3>Buttons configuration</h3></a>
          <p>You can prevent operations on lists with the following options:</p>
          <ul>
            <li><code>disableAdd</code>: (default <code>false</code>) prevents adding new items</li>
            <li><code>disableRemove</code>: (default <code>false</code>) prevents removing existing items</li>
            <li><code>disableOrder</code>: (default <code>false</code>) prevents sorting existing items</li>
          </ul>
          <pre><code>
var options = {
  disableOrder: true
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p18" class="form"></div>
            <pre id="v18" class="value"></pre>
          </div>

          <h2>Textbox options</h2>

          <p><b>Tech note.</b> Values containing only white spaces are converted to <code>null</code>.</p>

          <a name="textbox-type"><h3>Type attribute</h3></a>
          <p>You can set the <code>type</code> attribute with the <code>type</code> option. The following values are allowed:</p>
          <ul>
            <li>'text' (default)</li>
            <li>'password'</li>
            <li>'hidden'</li>
            <li>'textarea' (outputs a textarea instead of a textbox)</li>
            <li>all the HTML5 <code>type</code> values</li>
          </ul>
          <pre><code>
var Textbox = t.struct({
  mytext: t.Str
});

var options = {
  fields: {
    mytext: {
      type: 'password'
    }
  }
};

&lt;Form type={Textbox} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p19" class="form"></div>
            <pre id="v19" class="value"></pre>
          </div>
          <pre><code>
var options = {
  fields: {
    mytext: {
      type: 'textarea'
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p20" class="form"></div>
            <pre id="v20" class="value"></pre>
          </div>

          <a name="textbox-placeholder"><h3>Placeholder</h3></a>
          <p>You can set the placeholder with the <code>placeholder</code> option:</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      placeholder: 'Type your text here'
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p21" class="form"></div>
            <pre id="v21" class="value"></pre>
          </div>

          <a name="textbox-label"><h3>Label</h3></a>
          <p>You can set the label with the <code>label</code> option:</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      // you can use strings or JSX
      label: &lt;i&gt;My label&lt;/i&gt;
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p22" class="form"></div>
            <pre id="v22" class="value"></pre>
          </div>

          <a name="textbox-help"><h3>Help</h3></a>
          <p>You can set a help message with the <code>help</code> option:</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      // you can use strings or JSX
      help: &lt;i&gt;My help&lt;/i&gt;
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p23" class="form"></div>
            <pre id="v23" class="value"></pre>
          </div>

          <a name="textbox-disabled"><h3>Disabled</h3></a>
          <p>You can disable the textbox / textarea with the <code>disabled</code> option:</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      disabled: true
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p24" class="form"></div>
            <pre id="v24" class="value"></pre>
          </div>

          <a name="textbox-error"><h3>Error message</h3></a>
          <p>Similar to fieldset's error message:</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      hasError: true,
      error: &lt;i&gt;A custom error message&lt;/i&gt;
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p25" class="form"></div>
            <pre id="v25" class="value"></pre>
          </div>

          <a name="textbox-autoFocus"><h3>Auto focus</h3></a>
          <p>Set the focus on this field.</p>
          <pre><code>
var options = {
  fields: {
    mytext: {
      autoFocus: true
    }
  }
};
          </code></pre>

          <h2>Checkbox options</h2>

          <a name="checkbox-common"><h3>Common options</h3></a>
          <p>The following options are similar to the textbox ones:</p>
          <ul>
            <li><code>label</code></li>
            <li><code>help</code></li>
            <li><code>disabled</code></li>
            <li><code>hasError</code></li>
            <li><code>error</code></li>
            <li><code>autoFocus</code></li>
          </ul>
          <pre><code>
var Checkbox = t.struct({
  rememberMe: t.Bool
});

var options = {
  fields: {
    rememberMe: {
      label: &lt;i&gt;My label&lt;/i&gt;
      help: &lt;i&gt;My help&lt;/i&gt
    }
  }
};

&lt;Form type={Checkbox} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p26" class="form"></div>
            <pre id="v26" class="value"></pre>
          </div>

          <h2>Select options</h2>

          <a name="select-common"><h3>Common options</h3></a>
          <p>The following options are similar to the textbox ones:</p>
          <ul>
            <li><code>label</code></li>
            <li><code>help</code></li>
            <li><code>disabled</code></li>
            <li><code>hasError</code></li>
            <li><code>error</code></li>
            <li><code>autoFocus</code></li>
          </ul>
          <pre><code>
var Select = t.struct({
  gender: Gender
});

var options = {
  fields: {
    gender: {
      label: &lt;i&gt;My label&lt;/i&gt;
      help: &lt;i&gt;My help&lt;/i&gt
    }
  }
};

&lt;Form type={Select} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p27" class="form"></div>
            <pre id="v27" class="value"></pre>
          </div>

          <a name="select-null-option"><h3>Null option</h3></a>
          <p>You can customize the null options with the <code>nullOption</code> option:</p>
          <pre><code>
var options = {
  fields: {
    gender: {
      nullOption: {value: '', text: 'Choose your gender'}
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p28" class="form"></div>
            <pre id="v28" class="value"></pre>
          </div>

          <p><b>Tech note.</b> A value equal to <code>nullOption.value</code> (default <code>''</code>) is converted to <code>null</code>.</p>

          <a name="select-order"><h3>Options order</h3></a>
          <p>You can sort the options with the <code>order</code> option:</p>
          <pre><code>
var options = {
  fields: {
    gender: {
      order: 'asc' // or 'desc'
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p29" class="form"></div>
            <pre id="v29" class="value"></pre>
          </div>

          <a name="select-options"><h3>Custom options</h3></a>
          <p>You can customize the options with the <code>options</code> option:</p>
          <pre><code>
var options = {
  fields: {
    gender: {
      options: [
        {value: 'M', text: 'Maschio'},
         // use `disabled: true` to disable an option
        {value: 'F', text: 'Femmina', disabled: true}
      ]
    }
  }
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p30" class="form"></div>
            <pre id="v30" class="value"></pre>
          </div>
          <p>You can also set optgroups:</p>
          <pre><code>
var Car = t.enums.of('Audi Chrysler Ford Renault Peugeot');

var Select = t.struct({
  car: Car
});

var options = {
  fields: {
    car: {
      options: [
        {value: 'Audi', text: 'Audi'}, // an option
        {label: 'US', options: [ // a group of options
          {value: 'Chrysler', text: 'Chrysler'},
          {value: 'Ford', text: 'Ford'}
        ]},
        {label: 'France', options: [ // another group of options
          {value: 'Renault', text: 'Renault'},
          {value: 'Peugeot', text: 'Peugeot'}
        ], disabled: true} // use `disabled: true` to disable an optgroup
      ]
    }
  }
};

&lt;Form type={Select} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p31" class="form"></div>
            <pre id="v31" class="value"></pre>
          </div>

          <a name="select-as-radio"><h3>Render as radio</h3></a>
          <p>You can render the select as a radio using the <code>factory</code> option to override the default:</p>
          <pre><code>
var options = {
  factory: t.form.Radio
};
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p32" class="form"></div>
            <pre id="v32" class="value"></pre>
          </div>

          <a name="select-multiple"><h3>Multiple</h3></a>
          <p>You can turn the select in a multiple select passing a list as type and using the <code>factory</code> option to override the default:</p>
          <pre><code>
var Car = t.enums.of('Audi Chrysler Ford Renault Peugeot');

var options = {
  factory: t.form.select
};

&lt;Form type={t.list(Car)} options={options} /&gt;
          </code></pre>
          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p33" class="form"></div>
            <pre id="v33" class="value"></pre>
          </div>

          <h1>Customizations</h1>

          <a name="templates"><h2>Templates</h2></a>

          <p>To customize the "skin" of tcomb-form you have to write a <em>template</em>. A template is simply a function with the following signature:</p>
          <pre><code>function(locals) -> UVDOM | ReactElement</code></pre>
          <p>where <code>locals</code> is an object contaning the "recipe" for rendering the input and is built by tcomb-form for you. The returned value can be a <a href="https://github.com/gcanti/uvdom">UVDOM</a> or a ReactElement.</p>
          <p>Let's build a template for a search textbox styled with Bootstrap. tcomb-form will pass to your template the following recipe (you can find all the recipes in <code>lib/skin.js</code>):</p>
          <pre><code>
var Textbox = struct({
  autoFocus: maybe(Bool),   // should receive the focus on start
  config: maybe(Obj),       // custom options, see Template addons section
  disabled: maybe(Bool),    // should be disabled
  error: maybe(Label),      // should show an error
  hasError: maybe(Bool),    // if true should show an error state
  help: maybe(Label),       // should show an help message
  id: Str,                  // should use this as id attribute and as htmlFor label attribute
  label: maybe(Label),      // should show a label
  name: Str,                // should use this as name attribute
  onChange: Func,           // should call this function with the changed value
  placeholder: maybe(Str),  // should show a placeholder
  type: TypeAttr,           // should use this as type attribute
});

var Label = union([Str, ReactElement]);

var TypeAttr = enums.of('textarea hidden text password color date datetime datetime-local email month number range search tel time url week');
          </code></pre>

          <p>Writing the custom template with JSX:</p>

          <pre><code>
var cx = require('react/lib/cx');

// the custom template
function search(locals) {

  var formGroupClasses = {
    'form-group': true,
    'has-feedback': true, // required for the icon
    'has-error': locals.hasError
  };

  return (
    &lt;div className={cx(formGroupClasses)}&gt;

      {/* add a label if specified */}
      {locals.label ? &lt;label className="control-label"&gt;{locals.label}&lt;/label&gt; : null}

      &lt;input
        disabled={locals.disabled}
        className="form-control"
        name={locals.name}
        placeholder={locals.placeholder}
        onChange={function (evt) {
          locals.onChange(evt.target.value);
        }}
        style={{'borderRadius': '20px'}}
        type={locals.type}
        value={locals.value} /&gt;

      {/* add a search icon */}
      &lt;span className="glyphicon glyphicon-search form-control-feedback"&gt;&lt;/span&gt;

      {/* add an error if specified */}
      {locals.error ? &lt;span className="help-block error-block"&gt;{locals.error}&lt;/span&gt; : null}

      {/* add a help if specified */}
      {locals.help ? &lt;span className="help-block"&gt;{locals.help}&lt;/span&gt; : null}

    &lt;/div&gt;
  );
}

var Search = t.struct({
  search: t.Str
});

var options = {
  templates: {
    textbox: search // overrides the default template for textboxes
  }
};

&lt;Form type={Search} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p34" class="form"></div>
            <pre id="v34" class="value"></pre>
          </div>

          <a name="templates-extra-options"><h2>Templates extra options</h2></a>

          <p>Sometimes you need extra options besides those provided by tcomb-form. You may want to pass additional values to the search textbox defined above, say a background color and a foreground color. That's a duty for the <code>config</code> object in the Textbox recipe: tcomb-form assure you to pass the object from the api call to your template:</p>

          <pre><code>
var Search = t.struct({
  search: t.Str
});

var options = {
  templates: {
    textbox: search
  },
  fields: {
    search: {
      // custom configuration
      <b>config: {
        color: '#FFA000',
        backgroundColor: '#FFECB3'
      }</b>
    }
  }
};

&lt;Form type={Search} options={options} /&gt;
          </code></pre>

          <p>Let's modify the <code>search</code> template to handle the new custom configuration:</p>

          <pre><code>
var cx = require('react/lib/cx');

// the custom template
function search(locals) {

  var formGroupClasses = {
    'form-group': true,
    'has-feedback': true,
    'has-error': locals.hasError
  };

  // config contains your new params
  <b>var config = locals.config || {};
  var style = {</b>
    borderRadius: '20px',<b>
    color: config.color,
    backgroundColor: config.backgroundColor
  };</b>

  return (
    &lt;div className={cx(formGroupClasses)}&gt;

      {/* add a label if specified */}
      {locals.label ? &lt;label className="control-label"&gt;{locals.label}&lt;/label&gt; : null}

      &lt;input
        disabled={locals.disabled}
        className="form-control"
        name={locals.name}
        placeholder={locals.placeholder}
        onChange={function (evt) {
          locals.onChange(evt.target.value);
        }}
        <b>style={style}</b>
        type={locals.type}
        value={locals.value} /&gt;

      {/* add a search icon */}
      &lt;span className="glyphicon glyphicon-search form-control-feedback"&gt;&lt;/span&gt;

      {/* add an error if specified */}
      {locals.error ? &lt;span className="help-block error-block"&gt;{locals.error}&lt;/span&gt; : null}

      {/* add a help if specified */}
      {locals.help ? &lt;span className="help-block"&gt;{locals.help}&lt;/span&gt; : null}

    &lt;/div&gt;
  );
}
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p35" class="form"></div>
            <pre id="v35" class="value"></pre>
          </div>

          <a name="transformers"><h2>Transformers</h2></a>

          <p>Say you want modify the search textbox to accepts a list of keywords separated by spaces:</p>

          <pre><code>
var Search = t.struct({
  search: <b>t.list(t.Str)</b>
});
          </code></pre>

          <p>tcomb-form by default handle lists like this:</p>
          <div class="preview">
            <div id="p36" class="form"></div>
            <pre id="v36" class="value"></pre>
          </div>

          </code></pre>

          <p>In order to use the custom search textbox you have to override the default behaviour with the <code>factory</code> option:</p>

          <pre><code>
var options = {
  templates: {
    textbox: search
  },
  fields: {
    search: {
      <b>factory: t.form.textbox</b>
    }
  }
};
          </code></pre>

          <p>There is a problem though: a textbox handle only strings so we need a way to transform a list in a string and a string in a list: a <code>Transformer</code> deals with serialization / deserialization of data and has the following interface:</p>

          <pre><code>
var Transformer = struct({
  format: Func, // from value to string
  parse: Func   // from string to value
});
          </code></pre>

          <p>A simple transformer implementation for the search textbox:</p>

          <pre><code>
var listTransformer = {
  format: function (value) {
    return value ? value.join(' ') : null;
  },
  parse: function (str) {
    return str ? str.split(' ') : [];
  }
};
          </code></pre>

          <p>Now you can handle lists using the <code>transformer</code> option:</p>

          <pre><code>
// example of initial value
var value = {
  <b>search: ['climbing', 'yosemite']</b>
};

var options = {
  templates: {
    textbox: search
  },
  fields: {
    search: {
      factory: t.form.textbox,
      <b>transformer: listTransformer</b>,
      help: 'Keywords are separated by spaces'
    }
  }
};
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p37" class="form"></div>
            <pre id="v37" class="value"></pre>
          </div>

          <a name="custom-components"><h2>Custom components</h2></a>

          <p>You can wrap the previous work in a custom component. A custom component is a React component with the following props:</p>
          <pre><code>
&lt;Component ctx={ctx} type={type} options={options} value={value} onChange={onChange} /&gt;
          </code></pre>
          <p>where <code>options</code> is the object passed in the top level <code>&lt;Form/&gt;</code>, <code>ctx</code> is an object injected by tcomb-form which helps you to implement your custom component. The custom component must have a <code>getValue()</code> method returning a <code>ResultValidation</code> instance (see <a href="https://github.com/gcanti/tcomb-validation">tcomb-validation</a> for a reference):</p>

          <pre><code>
var SearchComponent = React.createClass({

  getInitialState: function () {
    return {
      hasError: false,
      value: this.props.value
    };
  },

  componentWillReceiveProps: function (props) {
    this.setState({value: props.value});
  },

  // aggressive optimization (optional)
  shouldComponentUpdate: function (nextProps, nextState) {
    return nextState.value !== this.state.value ||
      nextState.hasError !== this.state.hasError ||
      nextProps.value !== this.props.value ||
      nextProps.options !== this.props.options ||
      nextProps.ctx.report.type !== this.props.ctx.report.type ||
      nextProps.onChange !== this.props.onChange;
  },

  onChange: function (value) {
    value = listTransformer.parse(value);
    this.setState({value: value}, function () {
      this.props.onChange(value);
    }.bind(this));
  },

  getValue: function () {
    var result = t.validate(this.state.value, this.props.ctx.report.type);
    this.setState({hasError: !result.isValid()});
    return result;
  },

  render: function () {
    var opts = this.props.options || {};
    var ctx = this.props.ctx;

    // handling label
    var label = opts.label;
    if (!label && ctx.auto === 'labels') {
      // if labels are auto generated, get the default label
      label = ctx.getDefaultLabel();
    }

    // handling placeholder
    var placeholder = null;
    // labels have higher priority
    if (!label && ctx.auto !== 'none') {
      placeholder = !t.Nil.is(opts.placeholder) ? opts.placeholder : ctx.getDefaultLabel();
    }

    // handling name attribute
    var name = opts.name || ctx.name;

    // formatting
    var value = listTransformer.format(this.state.value);

    // handling error message
    var error = t.Func.is(opts.error) ? opts.error(this.state.value) : opts.error;

    // using the custom template defined above
    return search({
      config: opts.config,
      disabled: opts.disabled,
      error: error,
      hasError: this.state.hasError,
      help: opts.help,
      label: label,
      name: name,
      onChange: this.onChange,
      placeholder: placeholder,
      type: 'search',
      value: value
    });

  }
});
          </code></pre>

          <p>Now you can call your new custom input using only the <code>factory</code> option:</p>

          <pre><code>
var value = {
  search: ['climbing', 'yosemite']
};

var options = {
  fields: {
    search: {
      <b>factory: SearchComponent</b>
    }
  }
};
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p38" class="form"></div>
            <pre id="v38" class="value"></pre>
          </div>

          <a name="config"><h2>General configuration</h2></a>

          <p>tcomb-form uses the following default settings:</p>
          <ul>
            <li>english as language</li>
            <li>Bootstrap as theme</li>
            <li>a default transformer to handle numbers</li>
          </ul>

          <h3>Changing the default language</h3>
          <p>You can change the default language with the <code>config.i18n</code> setting:</p>
          <pre><code>
var api = require('tcomb-form/lib/api');

t.form.config.i18n = new api.I18n({
  optional: ' (opzionale)',
  add: 'Nuovo',
  remove: 'Elimina',
  up: 'Su',
  down: 'Giù'
});
          </code></pre>

          <h3>Changing the default skin</h3>
          <p>You can change the default skin with the <code>config.templates</code> setting:</p>
          <pre><code>
var t = require('tcomb-form/lib'); // tcomb-form without templates!
var ionic = require('tcomb-form/lib/skins/ionic');

t.form.config.templates = ionic;
          </code></pre>

          <h1>Advanced form validation</h1>

          <a name="struct-subtypes"><h2>Struct subtypes</h2></a>
          <p>You can use subtypes also with structs:</p>
          <pre><code>
// if notifyMe === true then email is required
var predicate = function (person) {
  return person.notifyMe === false || (!t.Nil.is(person.email));
};

var Person = t.subtype(t.struct({
  name: t.Str,
  notifyMe: t.Bool,
  email: t.maybe(t.Str)
}), predicate);

var options = {
  error: 'Insert your email if you want to be notified'
};

&lt;Form type={Person} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p39" class="form"></div>
            <pre id="v39" class="value"></pre>
          </div>

          <a name="list-subtypes"><h2>List subtypes</h2></a>
          <p>You can use subtypes also with lists:</p>
          <pre><code>
// at least two tags
var predicate = function (tags) {
  return tags.length >= 2;
};

var Tags = t.subtype(t.list(t.Str), predicate);

var options = {
  error: 'Insert at least two tags'
};

&lt;Form type={Tags} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p40" class="form"></div>
            <pre id="v40" class="value"></pre>
          </div>

          <h1>Bootstrap extras</h1>

          <a name="bootstrap-textbox"><h2>Textbox</h2></a>

          <h3>Addons</h3>
          <p>You can set an addon before or an addon after with the <code>config.addonBefore</code> and <code>config.addonAfter</code> options:</p>
          <pre><code>
var Textbox = t.struct({
  mytext: t.Str
});

var options = {
  fields: {
    mytext: {
      config: {
        // you can use strings or JSX
        addonBefore: &lt;i&gt;before&lt;i&gt;,
        addonAfter: &lt;i&gt;after&lt;/i&gt;
      }
    }
  }
};

&lt;Form type={Textbox} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p41" class="form"></div>
            <pre id="v41" class="value"></pre>
          </div>

          <h3>Size</h3>
          <p>You can set the textbox size with the <code>config.size</code> option:</p>
          <pre><code>
var Textbox = t.struct({
  mytext: t.Str
});

var options = {
  fields: {
    mytext: {
      config: {
        size: 'lg' // xs sm md lg are allowed
      }
    }
  }
};

&lt;Form type={Textbox} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p42" class="form"></div>
            <pre id="v42" class="value"></pre>
          </div>

          <a name="bootstrap-select"><h2>Select</h2></a>
          <p>Same as Textbox extras.</p>

          <a name="bootstrap-fieldset"><h2>Fieldset</h2></a>
          <p>You can render the form horizontal with the <code>horizontal</code> option:</p>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  notifyMe: t.Bool,
  email: t.maybe(t.Str)
});

var options = {
  auto: 'labels',
  config: {
    // for each of lg md sm xs you can specify the columns width
    horizontal: {
      md: [3, 9],
      sm: [6, 6]
    }
  }
};

&lt;Form type={Person} options={options} /&gt;
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p43" class="form"></div>
            <pre id="v43" class="value"></pre>
          </div>

          <p><b>Note</b>. Remember to add the class <code>form-horizontal</code> to the <code>form</code> tag.</p>

          <h1>Isomorphic forms</h1>

          <a name="isomorphic-name"><h2>name attributes</h2></a>
          <p>tcomb-form set automatically the <code>name</code> attribute of inputs and they are compatible with the <a href="https://github.com/hapijs/qs">qs</a> module:</p>
          <pre><code>
var express = require('express');
var bodyParser = require('body-parser');
var app = express();

app.use(bodyParser.urlencoded({ extended: true }));

app.post('/', function (req, res) {
  // req.body is a JSON containing the raw value of the form
  var value = req.body;
});
          </code></pre>

          <h1>Controlled forms</h1>

          <a name="controlled-forms"><h2>Changing the form configuration on the fly</h2></a>
          <pre><code>
var Person = t.struct({
  name: t.Str,
  surname: t.Str
});

var Person2 = t.struct({
  name: t.Str,
  surname: t.Str,
  age: t.Num
});

var App = React.createClass({
  getInitialState: function () {
    return {
      type: Person,
      options: {
        fields: {
          name: {
            help: 'Type "a" to change the form configuration on the fly'
          }
        }
      },
      value: {}
    };
  },
  getValue: function () {
    var value = this.refs.form.getValue();
    if (value) {
      console.log(value);
    }
  },
  onChange: function (value) {
    // changes the form configuration on the fly!
    if (value.name === 'a') {
      // you can change even the type
      this.state.type = Person2;
      // change options
      this.state.options.fields.surname = {disabled: true};
    }
    this.state.value = value;
    this.forceUpdate();
  },
  render: function() {
    return (
      &lt;div&gt;
        &lt;Form ref="form"
          <b>type={this.state.type}
          options={this.state.options}
          value={this.state.value}</b>
          onChange={this.onChange} /&gt;
        &lt;button className="btn btn-primary" onClick={this.getValue}>getValue&lt;/button&gt;
      &lt;/div&gt;
    );
  }
});
          </code></pre>

          <p><b>Output</b>:</p>
          <div class="preview">
            <div id="p44" class="form"></div>
            <pre id="v44" class="value"></pre>
          </div>

          <h1>API</h1>

          <a name="api-Form"><h2>t.form.Form</h2></a>
          <p>Main API</p>
          <pre><code>
t.form.Form: ReactClass
          </code></pre>
          <p>Returns a ReactClass with a <code>getValue()</code> method:</p>
          <pre><code>
getValue(raw: maybe(Bool)) -> Nil | Obj
          </code></pre>
          <p><code>getValue</code> returns <code>null</code> if the validation failed, an object containing the form values if validation succeded.</p>
          <p>If the optional parameter <code>raw</code> is set to <code>true</code> then <code>getValue</code> returns a <code>ValidationResult</code> (<a href="https://github.com/gcanti/tcomb-validation">tcomb-validation</a> for a reference)</p>
          <p>The returned ReactClass accepts the following props:</p>
          <ul>
            <li><code>type</code>: (required) the model being validated</li>
            <li><code>options</code>: (optional) an object containing the rendering options</li>
            <li><code>value</code>: (optional) the default value of the form (fields)</li>
            <li><code>onChange</code>: a function with signature <code>function(value) -> Any</code> called whenever a form value is changed. <b>Note</b>. the value passed to <code>onChange</code> <b>could</b> be invalid since is a raw value (call <code>getValue</code> to retrieving a valid value).</li>
          </ul>
          <pre><code>
var App = React.createClass({

  <b>onChange: function (rawValue) {
    console.log(rawValue);
  }</b>,

  render: function () {
    return (
      &lt;div&gt;
        &lt;Form ref="form" <b>onChange={this.onChange}</b> /&gt;
      &lt;/div&gt;
    );
  }

});
            </code></pre>

          <p><b>Output</b> (raw values will be displayed while typing):</p>
          <div class="preview">
            <div id="p45" class="form"></div>
            <pre id="v45" class="value"></pre>
          </div>

        </div>
      </div>
    </div>
    <div class="container">
      <footer>
        <div class="row">
          <div class="col-xs-6">
            <a href="https://twitter.com/GiulioCanti">Twitter</a>
            <a href="https://github.com/gcanti/tcomb-form">Github</a>
          </div>
          <div class="col-xs-6 text-right">
            Open source (MIT). Made by Giulio Canti
          </div>
        </div>
      </footer>
    </div>
  </body>
  <script type="text/javascript" src="../js/react-0.12.2.js"></script>
  <script type="text/javascript" src="../js/highlight.js"></script>
  <script type="text/javascript" src="bundle.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53674495-1', 'auto');
    ga('send', 'pageview');

  </script>
</html>

